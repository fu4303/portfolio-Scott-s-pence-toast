---
date: 2021-05-06
title: SvelteKit starter blog with GraphCMS
tags: ['svelte', 'sveltekit', 'vite']
private: false
---

I made a starter blog with SvelteKit and GraphCMS, I've been doing a
couple of small projects with it and a _really_ like it!

Here's a small SvelteKit blog starter made with it from the GraphCMS
blog starter.

## Creat the backend with GraphCMS

First up I'll create a GraphCMS project for this starter to pull the
posts from, if you're following along you can crate a GraphCMS account
either with email or by logging in with your GitHub account.

Once you're signed in you can either create a new project from scratch
or pick one of the starters that are available.

I'm going to pick the 'Blog Starter' project which will have GraphCMS
schema already created with some content to use.

Next I'm prompted to give my project a name and a description then
I'll need to pick the (data center) region where I want the project to
live, I'm picking Europe as that closest to me then clicking the
'Create Project' button.

I'm then prompted to pick the pricing plan for the project, as this is
only a demo I'll pick the community pricing plan (free) and skip
inviting team members.

## Scaffold out the SvelteKit project

Now I'll create a directory for the project change directory into it
(`cd`) and use the SvelteKit `npm init` script:

```bash
mkdir sveltekit-starter-blog
cd sveltekit-starter-blog
# initialise SvelteKit
npm init svelte@next
```

I chose the skeleton project option with no TypeScript support and
ESLint and Prettier config. Now I can install the dependencies with:

```bash
npm i
```

I can now start the dev server and take a look at the project, I'll
start the dev server with `npm run` and add some additional
paramerters to the script with `--` then `-o` (or `--open`) to open in
the browser and `-p 3300` (or `--port 3300`) to specify the port to
run on:

```bash
npm run dev -- -o -p 3300
```

That's the project, pretty bare bones with nothing other than a
landing page!

## Add TailwindCSS

There's a really useful GitHub project that adds additional
functionality to your Svelte projects with [Svelte Add] in this case
I'm going to add Tailwind with the Just In Time (JIT) compiler
enabled:

```bash
npx svelte-add tailwindcss  --jit
```

Then I'll need to create the base CSS file and add in the Tailwind
directives for `base`, `components`, and `utilities`:

```bash
touch src/app.css
```

Add in the Tailwind directives to the `src/app.css` file:

```css
@tailwind base;
@tailwind components;
@tailwind utilities;
```

I'll come onto the styling later for now I'm going to focus on getting
the posts into the project and using the SvelteKit layout to add some
elements that are presisted through route changes.

Create a SvelteKit layout in the routes folder:

```bash
touch src/routes/__layout
```

The layout will be wrapping the project so the one requirement of a
`__layout` in SvelteKit is a `<slot/>` see my notes on Svelte [slots]
for more on that.

In the layout I'll import the global CSS and add in a basic nav for
now along with the required slot:

```html
<script>
  import '../app.css'
</script>

<nav>
  <a href="/">Home</a>
  <a href="/about">About</a>
</nav>

<slot />
```

## Routes for the blog posts

If you are familiar with [NextJS dynamic routes] then this will be
familiar, if not then it's a way to determine the routes (URL address)
in the project programmatically.

I'm using the Svelte `script context="module"` so that that I can get
the posts from the GraphCMS endpoint ahead of time. That means it's
run when the page is loaded and the posts can be loaded ahead of the
page being rendered on the screen.

Amended the `index.svelte` file to fetch posts from GraphCMS endpoint:

```html
<script context="module">
  import { GraphQLClient } from 'graphql-request'

  export async function load() {
    const graphcms = new GraphQLClient(
      import.meta.env.VITE_GRAPHCMS_URL,
      {
        headers: {},
      }
    )

    const { posts } = await graphcms.request(
      `{
          posts {
            slug
            title
          }
      }`
    )

    return {
      props: {
        posts,
      },
    }
  }
</script>

<script>
  export let posts
</script>

<h1>SvelteKit starter blog</h1>
<ul>
  {#each posts as post}
  <li>
    <a class="text-blue-600 underline" href="/blog/{post.slug}">
      {post.title}
    </a>
  </li>
  {/each}
</ul>
```

I'm still early days with Svelte but so far I'm super impressed with
it.

[svelte add]: https://github.com/svelte-add/svelte-add
[slots]: https://scottspence.com/2021/04/06/notes-on-svelte/#slots
[nextjs dynamic routes]:
  https://nextjs.org/docs/routing/dynamic-routes
